{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pacu\\\\Desktop\\\\f\\\\ElderCare\\\\reactfront\\\\src\\\\components\\\\Main.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport \"../CSS/main.css\";\nimport Header from './Header';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Main() {\n  _s();\n  const [elderData, setElderData] = useState([{}]);\n  const sessionData = sessionStorage.getItem(\"UserSession\");\n  useEffect(() => {\n    const userId = JSON.parse(sessionData);\n    const fetchElderList = async () => {\n      try {\n        const response = await fetch(`/api/caregivers/${userId['user_id']}/elder-list`);\n        const elders = await response.json();\n        setElderData(elders);\n        console.log(elders);\n        return elders;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const fetchLocation = elders => {\n      // Fetch location data for each elder in elderData\n      elders.forEach((elder, index) => {\n        // Replace `your_location_endpoint` with the actual endpoint for fetching location data\n        fetch(`/api/caregivers/elder/${elder.id}/location`).then(response => response.json()).then(locationData => {\n          // Do something with the location data for the elder\n          updateElderLocation(index, locationData.location);\n          console.log(elderData);\n        }).catch(error => console.error(error));\n      });\n    };\n    fetchElderList().then(elders => {\n      // Initialize the location fetching interval after the elder list is fetched\n      const interval = setInterval(() => {\n        fetchLocation(elders);\n      }, 3000);\n\n      // Cleanup function to clear the interval\n      return () => clearInterval(interval);\n    }).catch(error => console.error(error));\n  }, []);\n  const updateElderLocation = (elderId, newLocation) => {\n    setElderData(prevElderData => prevElderData.map(elder => elder.id === elderId ? {\n      ...elder,\n      location: newLocation\n    } : elder));\n  };\n  const handleMonitor = (name, sirname, address) => {\n    return `/monitor/${name}/${sirname}/${address}`;\n  };\n  const handleConfigureClick = (id, name, sirname, address, uuid) => {\n    return `/elder-config/${id}/${name}/${sirname}/${address}/${uuid}`;\n  };\n  const ElderDetails = _ref => {\n    let {\n      id,\n      name,\n      sirname,\n      address,\n      uuid,\n      location,\n      onClickMonitor\n    } = _ref;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"elder-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [name, \" \", sirname]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        className: \"monitor-button\",\n        to: onClickMonitor(name, sirname, address),\n        children: \" Monitor \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: address\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: location !== 'undefined' ? location : 'loading'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"configuration-body\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: \"Button-configure\",\n          to: handleConfigureClick(id, name, sirname, address, uuid),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/images/configure.jpg\",\n            alt: \"configure\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"Button-configure\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/images/del.jpg\",\n            alt: \"delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-background\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-component\",\n      children: elderData && elderData.length > 0 ? elderData.map((person, index) => /*#__PURE__*/_jsxDEV(ElderDetails, {\n        id: person.id,\n        name: person.name,\n        sirname: person.sirname,\n        address: person.address,\n        uuid: person.uuid,\n        location: person.location,\n        onClickMonitor: handleMonitor\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No elder data available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n_s(Main, \"cdlI0Se8ILKLKaljwuk2tYG24gU=\");\n_c = Main;\nexport default Main;\nvar _c;\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["React","useEffect","useState","Header","Link","jsxDEV","_jsxDEV","Main","_s","elderData","setElderData","sessionData","sessionStorage","getItem","userId","JSON","parse","fetchElderList","response","fetch","elders","json","console","log","error","fetchLocation","forEach","elder","index","id","then","locationData","updateElderLocation","location","catch","interval","setInterval","clearInterval","elderId","newLocation","prevElderData","map","handleMonitor","name","sirname","address","handleConfigureClick","uuid","ElderDetails","_ref","onClickMonitor","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","src","alt","length","person","_c","$RefreshReg$"],"sources":["C:/Users/Pacu/Desktop/f/ElderCare/reactfront/src/components/Main.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport \"../CSS/main.css\";\r\nimport Header from './Header';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Main() {\r\n  const [elderData, setElderData] = useState([{}])\r\n  const sessionData = sessionStorage.getItem(\"UserSession\");\r\n  useEffect(()=>{\r\n    \r\n    const userId = JSON.parse(sessionData);\r\n\r\n    const fetchElderList = async () => {\r\n      try {\r\n        const response = await fetch(`/api/caregivers/${userId['user_id']}/elder-list`);\r\n        const elders = await response.json();\r\n        setElderData(elders);\r\n        console.log(elders);\r\n        return elders;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    const fetchLocation = (elders) => {\r\n      // Fetch location data for each elder in elderData\r\n      elders.forEach((elder, index) => {\r\n        // Replace `your_location_endpoint` with the actual endpoint for fetching location data\r\n        fetch(`/api/caregivers/elder/${elder.id}/location`)\r\n          .then((response) => response.json())\r\n          .then((locationData) => {\r\n            // Do something with the location data for the elder\r\n            updateElderLocation(index, locationData.location);\r\n            console.log(elderData);\r\n          })\r\n          .catch((error) => console.error(error));\r\n      });\r\n    };\r\n    fetchElderList()\r\n    .then((elders) => {\r\n      // Initialize the location fetching interval after the elder list is fetched\r\n      const interval = setInterval(() => {\r\n        fetchLocation(elders);\r\n      }, 3000);\r\n\r\n      // Cleanup function to clear the interval\r\n      return () => clearInterval(interval);\r\n    })\r\n    .catch((error) => console.error(error));\r\n    \r\n  }, [])\r\n\r\n  const updateElderLocation = (elderId, newLocation) => {\r\n    setElderData((prevElderData) =>\r\n    prevElderData.map((elder) =>\r\n      elder.id === elderId\r\n        ? {\r\n            ...elder,\r\n            location: newLocation,\r\n          }\r\n        : elder\r\n    )\r\n  );\r\n  };\r\n  \r\n  const handleMonitor = (name, sirname, address) => {\r\n    return `/monitor/${name}/${sirname}/${address}`;\r\n  };\r\n  const handleConfigureClick = (id, name, sirname, address, uuid) => {\r\n    return `/elder-config/${id}/${name}/${sirname}/${address}/${uuid}`;\r\n  };\r\n\r\n  const ElderDetails = ({ id, name, sirname, address, uuid, location, onClickMonitor }) => {\r\n    return (\r\n      <div className=\"elder-details\">\r\n        <h2>{name} {sirname}</h2>\r\n        <Link className='monitor-button' to={onClickMonitor(name, sirname, address)}> Monitor </Link>\r\n        <h3>{address}</h3>\r\n        <h3>{location !== 'undefined' ? location : 'loading' }</h3>\r\n        <div className=\"configuration-body\">\r\n            <Link className='Button-configure' to={handleConfigureClick(id, name, sirname, address, uuid)}>\r\n              <img src=\"/images/configure.jpg\" alt=\"configure\" />\r\n            </Link>\r\n                <button className='Button-configure' >\r\n                    <img src=\"/images/del.jpg\" alt=\"delete\"></img>\r\n                </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"main-background\">\r\n    <Header />\r\n      <div className='main-component'>\r\n        {elderData && elderData.length > 0 ? (\r\n          elderData.map((person, index) => (\r\n            <ElderDetails\r\n              key={index}\r\n              id={person.id}\r\n              name={person.name}\r\n              sirname={person.sirname}\r\n              address={person.address}\r\n              uuid={person.uuid}\r\n              location={person.location}\r\n              onClickMonitor={handleMonitor}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p>No elder data available.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Main\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}